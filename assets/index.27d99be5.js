import{h as m,c as u}from"./index.67bdbe62.js";import{b as N}from"./_qrcode@1.5.0@qrcode.a1c3cf31.js";import{b as C,v as I}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import{y as f,z as d,A as r,F as v,E as o,D as _,r as x,m as l,G as y,J as D,K as k,L as S,s as O,O as L}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{q as p,I as h}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_vant@3.4.6@vant.e4fff504.js";import"./_@vant_use@1.3.6@@vant.1b0ef691.js";import"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";import"./_@vant_popperjs@1.1.0@@vant.ae31ad00.js";import"./_vue-mobile-calendar@3.3.0@vue-mobile-calendar.c9c3461a.js";import"./_axios@0.21.4@axios.56d8ec29.js";import"./_vuex@4.0.2@vuex.35900dea.js";import"./_@vue_devtools-api@6.1.3@@vue.3188b863.js";import"./_vue-router@4.0.14@vue-router.c27d2a8d.js";import"./_qs@6.10.3@qs.59603e06.js";import"./_side-channel@1.0.4@side-channel.0a841574.js";import"./_get-intrinsic@1.1.1@get-intrinsic.46bb42c1.js";import"./_has-symbols@1.0.3@has-symbols.7f361f9b.js";import"./_function-bind@1.1.1@function-bind.09a6b7a3.js";import"./_has@1.0.3@has.dc0c57e0.js";import"./_call-bind@1.0.2@call-bind.c10bfa07.js";import"./_object-inspect@1.12.0@object-inspect.b4aaeeae.js";import"./_lodash@4.17.21@lodash.2e4506b9.js";import"./_dayjs@1.11.0@dayjs.c3a0a36c.js";import"./_echarts@5.2.2@echarts.518f2fa5.js";import"./_tslib@2.3.0@tslib.54efd67f.js";import"./_zrender@5.2.1@zrender.d1d234d3.js";import"./_encode-utf8@1.0.3@encode-utf8.0224ba17.js";import"./_dijkstrajs@1.0.2@dijkstrajs.122a01d3.js";const B=new URL("./assets/icon_empty.cc677018.png",self.location).href,R=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAKJJREFUKFNjZCASMBKpjoExNa/FipHxnwk+DUyMDGcZ0/KbHzEwMMjiU/ifgeEZY3p+c/K//wyzGRkZsDrj/3+G/0wM/zPAkmn5LVUMDP9bsZr6n6Fu1qTaZrgp6QXNE/7/Z8hHUfyfYeqsSbU5IDFk60DuXcLAwBAFVbxyluDfKIaGhn/oChnS0tJYGThk5zIyMDC9e/43afXqhl8wG4gORwBpli6Zm64CFwAAAABJRU5ErkJggg==",self.location).href,U=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IArs4c6QAAADlQTFRFAAAAg4ODg4ODhISEg4ODgYGBgoKChYWFgoKCgoKCg4ODg4ODgoKChISEg4ODhISEg4ODg4ODg4ODu0KpwgAAABN0Uk5TAE5QU1RVXFxobG1xcnJzdHX6+3z1wqcAAABJSURBVAgdBcEBAoIwDASwAJ2gW9Hj/4818XsDfL72NHBnp7Kgc0Bl0imgMmcKoJ6nANxJA3RqpIFOMbKgUzCyuFLAyOXcALbXH94bAri6vwkuAAAAAElFTkSuQmCC",self.location).href,E={data(){return{showLoading:!1,size:180,close:U,showDeep:!1,loadingOriginalPolicy:!1,dataArr:[],choiceComp:!1,activeCode:2e4,clearRes:B,down:R,chooseSelf:!1,companyName:"",companyNameId:"",modal_qr:!0,isWebview:0,isHome:1,menu:0,isOriginalInfo:0,defaultHeight:0,defaultHeightBase:0,isAdmin:!1,mobile:m("get","mobile")||"",code:"",loadingPage:!1}},watch:{$route:{handler(e,s){e&&e.type==null&&s&&s.query&&JSON.stringify(s.query)!="{}"&&this.companyNameData(s.query.id?s.query:{id:!1})},immediate:!0}},mounted(){const{query:e}=this.$route;this.companyNameData(e),(!this.companyNameId||this.chooseSelf)&&(this.defaultHeight=46+34)},methods:{turnNewAccountPage(){this.$router.push({path:"/businessAccount",query:{enterpriseId:this.companyNameId,name:this.companyName,id:this.companyNameId,type:this.isAdmin?1:0}})},getList(e=!1){let s=this;this.$api.myCompanyBase({mobile:m("get","mobile")},{"Content-Type":"application/x-www-form-urlencoded"}).then(c=>{if(s.loadingPage=!0,c.code==200){if(s.dataArr=c.data,s.dataArr.length==1)return s.dataArr.some(t=>{t.enterpriseId&&!e&&(this.companyName||(this.companyName=t.name),this.companyNameId||(this.companyNameId=t.enterpriseId),this.make()),this.companyNameId==t.enterpriseId&&t.type==1&&(this.isAdmin=!0)});if(s.dataArr.length>1)return s.dataArr.some(t=>{t.enterpriseId&&!e&&(this.companyName||(this.companyName=t.name),this.companyNameId||(this.companyNameId=t.enterpriseId),this.make()),this.companyNameId==t.enterpriseId&&t.type==1&&(this.isAdmin=!0)})}}).catch(c=>{s.loadingPage=!0})},openCompList(){this.getList(!0),this.choiceComp=!0},closePopup(){this.choiceComp=!1},onChange(e){},chooseCode(e){e.id=e.enterpriseId,e.isHome=this.isHome,e.menu=this.menu,e.isOriginalInfo=this.isOriginalInfo,this.companyNameData(e),this.choiceComp=!1},turnNewPage(e){this.activeCode=e,e==20002&&u(),e==20001&&this.$router.replace({path:"/applyCode"})},leftEvent(){u()},make(){this.showLoading=!0,this.$nextTick(()=>{let e=document.getElementById("canvas"),s=this;N.toCanvas(e,s.companyNameId,{width:180,height:180},function(c){s.showLoading=!1,c&&console.error(c),console.log("success!")})})},companyNameData(e){if(this.isHome=e.isHome?Number(e.isHome):0,this.menu=e.menu?Number(e.menu):0,this.isOriginalInfo=e.isOriginalInfo?Number(e.isOriginalInfo):0,this.isWebview=e.isWebview?Number(e.isWebview):0,e.id){this.companyName=e.name?e.name:"",this.companyNameId=e.id,this.isAdmin=!!(e.type&&e.type==1),this.getList();return}m("get","chooseCompanyId")&&(this.companyName=m("get","chooseCompany"),this.companyNameId=m("get","chooseCompanyId")),this.chooseSelf=m("get","chooseSelf")=="true",this.getList(),this.make()}}},g=e=>(k("data-v-09234862"),e=e(),S(),e),K={class:"code-area"},z={key:0,class:"default-show"},F={class:"ad-model flex flex-center"},H=["src"],q=g(()=>o("div",{class:"ad-text flex flex-center"},[o("span",{class:"f-14"},h("\u5F53\u524D\u6682\u65E0\u8BA4\u8BC1\u6210\u529F\u7684\u4F01\u4E1A\u7801"))],-1)),P={class:"code-apply-model"},M={key:1,class:"code-box-new"},J={class:"code-box-new-head f-14"},G={class:"code-box-new-head-title flex"},X={class:"tex_2 ellipsis"},T=["src"],Z={class:"code-current box-sizing flex"},V=O("\u52A0\u8F7D\u4E2D..."),Q=g(()=>o("canvas",{id:"canvas",class:"code-show"},null,-1)),W=L('<div class="code-split relative" data-v-09234862><div class="circle-code absolute circle-code-l" data-v-09234862></div><div class="code-split-common" data-v-09234862></div><div class="special-dashed-line" data-v-09234862></div><div class="code-split-common" data-v-09234862></div><div class="circle-code absolute circle-code-r" data-v-09234862></div></div><div class="manage-operation-code f-14 flex box-sizing" data-v-09234862></div>',2),Y={class:"popup-title flex"},j=g(()=>o("div",{class:"f-16 label-color popup-title-text"},"\u5207\u6362\u4F01\u4E1A",-1)),$={class:"cancel-popup"},ee=["src"],se={class:"popup-content"},oe={class:"scroll-popup box-sizing"},ie=["onClick"],te={class:"tex_2 word-break-custom"},ae={key:1,class:"loading-code"};function ne(e,s,c,t,i,n){const A=f("van-loading"),w=f("van-popup");return d(),r("div",K,[i.loadingPage?(d(),r(v,{key:0},[!i.companyNameId||i.chooseSelf?(d(),r("div",z,[o("div",F,[o("img",{src:i.clearRes,mode:"",class:"ad-img"},null,8,H),q]),o("div",P,[o("div",{class:p(["code-apply-model-btn f-16",[i.activeCode==20001?"active-btn":""]]),onClick:s[0]||(s[0]=a=>n.turnNewPage(20001))},"\u53BB\u7533\u7801 ",2),o("div",{class:p(["code-apply-model-btn f-16",[i.activeCode==20002?"active-btn":""]]),onClick:s[1]||(s[1]=a=>n.turnNewPage(20002))},"\u8FD4\u56DE\u9996\u9875 ",2)])])):_("",!0),i.companyNameId?(d(),r("div",M,[o("div",J,[o("div",G,[o("span",X,h(i.companyName),1),o("img",{src:i.down,class:"code-box-new-modal",onClick:s[2]||(s[2]=C((...a)=>n.openCompList&&n.openCompList(...a),["stop"]))},null,8,T)]),o("div",Z,[x(l(A,{type:"spinner",size:"24px"},{default:y(()=>[V]),_:1},512),[[I,i.showLoading]]),Q])]),W])):_("",!0),o("div",null,[l(w,{show:i.choiceComp,"onUpdate:show":s[4]||(s[4]=a=>i.choiceComp=a),position:"bottom",onChange:n.onChange},{default:y(()=>[o("div",Y,[j,o("div",$,[o("img",{src:i.close,class:"cancel-popup-icon",onClick:s[3]||(s[3]=(...a)=>n.closePopup&&n.closePopup(...a))},null,8,ee)])]),o("div",se,[o("div",oe,[(d(!0),r(v,null,D(i.dataArr,a=>(d(),r("div",{class:p(["comp-item",[i.companyNameId&&i.companyNameId==a.enterpriseId?"active-comp":""]]),onClick:ce=>n.chooseCode(a)},[o("span",te,h(a.name),1)],10,ie))),256))])])]),_:1},8,["show","onChange"])])],64)):(d(),r("div",ae,[l(A,{type:"spinner",size:"20"})]))])}var Fe=b(E,[["render",ne],["__scopeId","data-v-09234862"]]);export{Fe as default};
