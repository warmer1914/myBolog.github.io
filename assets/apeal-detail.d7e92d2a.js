var I=Object.defineProperty;var m=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var v=(t,e,a)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))A.call(e,a)&&v(t,a,e[a]);if(m)for(var a of m(e))y.call(e,a)&&v(t,a,e[a]);return t};import{a as E}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{a as b,c as w,U as L}from"./index.67bdbe62.js";import{m as S}from"./_vuex@4.0.2@vuex.35900dea.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{r as _}from"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";import{y as c,z as n,A as r,m as h,F as g,D as u,G as d,E as p,J as W,r as V,K as F,L as z,C as T,s as H}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{I as R,q as O}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_vant@3.4.6@vant.e4fff504.js";import"./_@vant_use@1.3.6@@vant.1b0ef691.js";import"./_@vant_popperjs@1.1.0@@vant.ae31ad00.js";import"./_vue-mobile-calendar@3.3.0@vue-mobile-calendar.c9c3461a.js";import"./_axios@0.21.4@axios.56d8ec29.js";import"./_vue-router@4.0.14@vue-router.c27d2a8d.js";import"./_qs@6.10.3@qs.59603e06.js";import"./_side-channel@1.0.4@side-channel.0a841574.js";import"./_get-intrinsic@1.1.1@get-intrinsic.46bb42c1.js";import"./_has-symbols@1.0.3@has-symbols.7f361f9b.js";import"./_function-bind@1.1.1@function-bind.09a6b7a3.js";import"./_has@1.0.3@has.dc0c57e0.js";import"./_call-bind@1.0.2@call-bind.c10bfa07.js";import"./_object-inspect@1.12.0@object-inspect.b4aaeeae.js";import"./_lodash@4.17.21@lodash.2e4506b9.js";import"./_dayjs@1.11.0@dayjs.c3a0a36c.js";import"./_echarts@5.2.2@echarts.518f2fa5.js";import"./_tslib@2.3.0@tslib.54efd67f.js";import"./_zrender@5.2.1@zrender.d1d234d3.js";import"./_@vue_devtools-api@6.1.3@@vue.3188b863.js";const U={setup(){const t=_(!1),e=_([]);return{popup:t,showPopup:()=>{t.value=!0},checked:e}},computed:f({},S(["noControl"])),data(){return{columnNum:"3",selectData:[{id:0,name:"\u571F\u5730\u6D77\u6D0B\u8BA1\u5212",isChoose:!1},{id:1,name:"\u80FD\u6E90\u73AF\u4FDD",isChoose:!1},{id:2,name:"\u4EBA\u529B\u793E\u4FDD",isChoose:!1},{id:3,name:"\u5E02\u573A\u76D1\u7BA1\u5BA1\u6279",isChoose:!1},{id:4,name:"\u8D22\u52A1\u7A0E\u6536",isChoose:!1},{id:5,name:"\u5B89\u5168\u751F\u4EA7",isChoose:!1},{id:6,name:"\u6559\u80B2\u536B\u751F",isChoose:!1},{id:7,name:"\u9053\u8DEF\u4EA4\u901A",isChoose:!1},{id:8,name:"\u653F\u7B56\u5151\u73B0",isChoose:!1}],apealStatue:1,radioItems:[{value:"0",name:"\u975E\u5E38\u6EE1\u610F",checked:"true"},{value:"1",name:"\u6EE1\u610F"},{value:"2",name:"\u57FA\u672C\u6EE1\u610F"},{value:"3",name:"\u4E0D\u6EE1\u610F"},{value:"4",name:"\u975E\u5E38\u4E0D\u6EE1\u610F"}],current:"0",statueData:{},pinjia:{aplContentId:"",entSatisfaction:"",entEvaluate:""},pingjiaId:"",zuijiaData:[],mainData:{backHistorys:[],attachments:[]},tabIndex:0,isWebdiv:0,showAction:!1,actions:[],actionHeader:[{name:"\u8F6C\u53D1\u7ED9\u533A\u957F",subname:"\u662F\u5426\u8F6C\u53D1\u7ED9\u533A\u957F?",disabled:!0},{name:"\u786E\u5B9A",callback:()=>this.chooseAction()}],actionContect:[{name:"\u89C6\u9891\u901A\u8BDD",callback:()=>this.chooseAction("videoCall"),className:"videoAction"},{name:"\u8BED\u97F3\u901A\u8BDD",callback:()=>this.chooseAction("voiceCall"),className:"voiceAction"}],isAction:!1,apiList:["getAppealDetail","wardenDirectDetail","getCompAuthDetail"],historys:[],isForward2Warden:null,hasZhuijiaList:!1}},created(){this.checkRouter(),this.showDetail()},filters:{fillTime(t){let e=t;return e=e.slice(0,11),e}},components:{},mounted(){},methods:{checkRouter(){let t=this.$route.query;this.id=t.id,this.isWebdiv=t.isWebdiv?Number(t.isWebdiv):0,this.apealStatue=t.statue,this.pingjiaId=t.pingjiaId,this.tabIndex=t.tabIndex?Number(t.tabIndex):0,this.apealStatue==5?this.actions=[...this.actionContect]:this.actions=[...this.actionHeader]},swiperight(t){console.log(t)},checkKeyDown(t){console.log(this.pinjia.entEvaluate),b(this.pinjia.entEvaluate)||(this.pinjia.entEvaluate=this.pinjia.entEvaluate.slice(0,this.pinjia.entEvaluate.length-1))},leftEvent(){uni.redirectTo({url:`/pages/appeal/appeal?tabIndex=${this.tabIndex}&isWebdiv=`+this.isWebdiv})},open(){this.popup=!0},radioChange(t){this.current=t.detail.value},showDetail(){const t=this.noControl?this.apiList[2]:this.apealStatue==5?this.apiList[1]:this.apiList[0];this.$api[t]({id:this.id}).then(e=>{if(e.code===200){let{aplContentVOList:a}=e.data;if(a.map(o=>{o.contactback=o.backHistorys.length!=0?o.backHistorys[o.backHistorys.length-1]:[]}),a.length>1&&(this.hasZhuijiaList=!0,this.zuijiaData=a.slice(1)),this.mainData=Object.assign({},this.mainData,a[0]),this.statueData=e.data,this.isForward2Warden=this.statueData.isForward2Warden?1:0,this.apealStatue!=5&&!this.pingjiaId){let o=this.statueData.aplContentVOList.length-1;this.isAction=!this.statueData.isForward2Warden&&(this.statueData.aplContentVOList[o].entSatisfaction==3||this.statueData.aplContentVOList[o].entSatisfaction==4)?!0:""}}else this.$toast(e.msg)})},gotoExtend(){this.$router.push({name:"appealExtend",query:{id:this.statueData.id}})},chooseAction(t=""){let e=this;if(this.cloesAction(),t){let a={tel:this.statueData.createTel,entId:this.statueData.entId,entName:this.statueData.entName};console.log(a),w(t,a);return}this.$api.appealForward({appealId:this.id}).then(a=>{a.code==200&&e.$toast.success({message:"\u8F6C\u53D1\u6210\u529F",duration:3e3,forbidClick:!0,onClose(){e.$router.push({name:"appealList",query:{tabIndex:e.tabIndex}})}})})},cloesAction(){this.showAction=!1},checkStrFormat(t){if(t==""||t==null||t==null)return!1;let e=!1;for(let a in t)L.checkStr(t[a],"numAndEnAndCnAndW")||(e=!0);return e},pingjiaEvent(){if(this.pinjia.aplContentId=this.pingjiaId,this.pinjia.entSatisfaction=Number(this.checked),!this.pinjia.entEvaluate.trim()){this.$toast("\u8BF7\u8F93\u5165\u8BC4\u4EF7\u5185\u5BB9");return}if(!b(this.pinjia.entEvaluate)||this.checkStrFormat(this.pinjia.entEvaluate)){this.$toast("\u4E0D\u80FD\u8F93\u5165\u7279\u6B8A\u5B57\u7B26");return}this.$api.appealPingjia(this.pinjia).then(t=>{t.code==200?this.$router.push({name:"appealList",query:{tabIndex:1}}):this.$toast(t.msg)})}},beforeRouteLeave(t,e,a){t&&t.path=="/appealList"&&this.$store.commit("SET_PAGE_TRANSFORM_PARAM",{tabIndex:this.tabIndex,keyWord:""}),a()}},q=t=>(F("data-v-61e54c34"),t=t(),z(),t),P={class:"cont-new"},Z={class:"popUps"},B=q(()=>p("div",{class:"title"},"\u4F01\u4E1A\u8BC9\u6C42\u8BC4\u4EF7",-1)),G={class:"radios"},M={class:"btn flex-ro"};function K(t,e,a,o,i,l){const x=c("appealList-common"),C=c("van-radio"),D=c("van-radio-group"),k=c("van-popup"),j=c("actionEvent");return n(),r("div",P,[h(x,{statueData:i.statueData,agreeList:i.radioItems,zuijiaData:i.zuijiaData,tabIndex:i.tabIndex,mainData:i.mainData,isEntl:i.apealStatue==5,historys:i.historys,hasZhuijiaList:i.hasZhuijiaList},null,8,["statueData","agreeList","zuijiaData","tabIndex","mainData","isEntl","historys","hasZhuijiaList"]),t.noControl?u("",!0):(n(),r(g,{key:0},[i.apealStatue==2?(n(),r("div",{key:0,class:"evaluate",onClick:e[0]||(e[0]=(...s)=>l.open&&l.open(...s))},"\u4F01\u4E1A\u8BC9\u6C42\u8BC4\u4EF7")):u("",!0),h(k,{show:o.popup,"onUpdate:show":e[4]||(e[4]=s=>o.popup=s),round:"",position:"bottom",style:{minHeight:"30%"}},{default:d(()=>[p("div",Z,[B,p("div",G,[h(D,{modelValue:o.checked,"onUpdate:modelValue":e[1]||(e[1]=s=>o.checked=s),direction:"horizontal",max:1},{default:d(()=>[(n(!0),r(g,null,W(i.radioItems,(s,J)=>(n(),T(C,{"icon-size":"14px",class:O(["radioText",{spText:o.checked==s.value}]),name:s.value},{default:d(()=>[H(R(s.name),1)]),_:2},1032,["class","name"]))),256))]),_:1},8,["modelValue"])]),V(p("textarea",{class:"texts","onUpdate:modelValue":e[2]||(e[2]=s=>i.pinjia.entEvaluate=s),placeholder:"\u8BF7\u8F93\u5165"},null,512),[[E,i.pinjia.entEvaluate]]),p("button",{class:"normal-btn",onClick:e[3]||(e[3]=(...s)=>l.pingjiaEvent&&l.pingjiaEvent(...s))},"\u63D0\u4EA4")])]),_:1},8,["show"]),p("div",M,[i.isAction&&i.tabIndex==1?(n(),r("button",{key:0,class:"normal-btn",style:{"border-radius":"25px","margin-right":"10px"},onClick:e[5]||(e[5]=s=>i.showAction=!0)},"\u8F6C\u53D1\u7ED9\u533A\u957F ")):u("",!0),i.isForward2Warden===0&&i.apealStatue==3?(n(),r("button",{key:1,class:"normal-btn",style:{"border-radius":"25px"},onClick:e[6]||(e[6]=(...s)=>l.gotoExtend&&l.gotoExtend(...s))},"\u8FFD\u52A0\u63D0\u95EE ")):u("",!0),i.apealStatue==5?(n(),r("button",{key:2,class:"normal-btn",style:{"border-radius":"25px","margin-right":"10px"},onClick:e[7]||(e[7]=s=>i.showAction=!0)},"\u8054\u7CFB\u4F01\u4E1A ")):u("",!0)]),h(j,{actions:i.actions,show:i.showAction,onCloesAction:l.cloesAction},null,8,["actions","show","onCloesAction"])],64))])}var jt=N(U,[["render",K],["__scopeId","data-v-61e54c34"]]);export{jt as default};
