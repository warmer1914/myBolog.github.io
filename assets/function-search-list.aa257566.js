import{U as h,h as e,c as p}from"./index.67bdbe62.js";import{_ as g}from"./plugin-vue_export-helper.21dcd24c.js";import{y as m,z as c,A as a,E as t,m as l,F as w,J as $,D as b,K as v,L as P}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{I as N}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import"./_vant@3.4.6@vant.e4fff504.js";import"./_@vant_use@1.3.6@@vant.1b0ef691.js";import"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";import"./_@vant_popperjs@1.1.0@@vant.ae31ad00.js";import"./_vue-mobile-calendar@3.3.0@vue-mobile-calendar.c9c3461a.js";import"./_axios@0.21.4@axios.56d8ec29.js";import"./_vuex@4.0.2@vuex.35900dea.js";import"./_@vue_devtools-api@6.1.3@@vue.3188b863.js";import"./_vue-router@4.0.14@vue-router.c27d2a8d.js";import"./_qs@6.10.3@qs.59603e06.js";import"./_side-channel@1.0.4@side-channel.0a841574.js";import"./_get-intrinsic@1.1.1@get-intrinsic.46bb42c1.js";import"./_has-symbols@1.0.3@has-symbols.7f361f9b.js";import"./_function-bind@1.1.1@function-bind.09a6b7a3.js";import"./_has@1.0.3@has.dc0c57e0.js";import"./_call-bind@1.0.2@call-bind.c10bfa07.js";import"./_object-inspect@1.12.0@object-inspect.b4aaeeae.js";import"./_lodash@4.17.21@lodash.2e4506b9.js";import"./_dayjs@1.11.0@dayjs.c3a0a36c.js";import"./_echarts@5.2.2@echarts.518f2fa5.js";import"./_tslib@2.3.0@tslib.54efd67f.js";import"./_zrender@5.2.1@zrender.d1d234d3.js";const _={data(){return{defaultHeight:0,currentPage:0,allPages:0,showDeep:!1,loadingOriginalPolicy:!1,isPolcy:0,isOriginal:0,isAppeal:0,tabIndex:0,searchText:"",navStyle:{navTitle:"\u653F\u7B56\u67E5\u8BE2",leftIcon:"arrowthinleft"},loadingPolicyInfoInfo:!1,popupTitle:"\u662F\u5426\u5220\u9664\u6240\u6709\u5386\u53F2\u8BB0\u5F55",keyword:"",oldKeyword:"",historyList:[],policyInfo:[],isPolicyDeclarationPage:0,isWebview:0,isMore:0,menu:0,funcName:"zxcx",urlPath:"",tabIndex:0,isCenter:0}},async mounted(){const{query:i}=this.$route;setTimeout(()=>{this.$refs.searchInput.focus()},500),this.getParamsIndex(i),this.getStorageHistory()},methods:{lower(){this.currentPage<this.allPages&&this.currentPage++},getParamsIndex(i){console.log(i),this.funcName=i.funcName||this.funcName,this.isWebview=i.isWebview?Number(i.isWebview):0,this.isHome=i.isHomeBase?Number(i.isHomeBase):0,this.isPolcy=i.isPolcyBase?Number(i.isPolcyBase):0,this.isMore=i.isMoreBase?Number(i.isMoreBase):0,this.isCenter=i.isCenter?Number(i.isCenter):0,this.isPolicyDeclarationPage=i.isPolicyDeclarationPage?Number(i.isPolicyDeclarationPage):0,this.isOriginal=i.isOriginal?Number(i.isOriginal):0,this.isAppeal=i.isAppeal?Number(i.isAppeal):0,this.tabIndex=i.tabIndex?Number(i.tabIndex):0,this.navStyle.navTitle=this.isAppeal&&this.isAppeal==1?"\u8BC9\u6C42\u67E5\u8BE2":this.isOriginal&&this.isOriginal==1?"\u539F\u6587\u67E5\u8BE2":"\u653F\u7B56\u67E5\u8BE2",this.menu=i.menu||0},getPolicyForKeyWord(i){!this.keyword&&!i||(h.trimAllSpace(this.keyword)!=""&&!this.historyList.some(s=>h.trimAllSpace(s)==h.trimAllSpace(this.keyword))&&this.historyList.unshift(this.keyword),this.historyList.length>10&&(this.historyList=this.historyList.slice(0,10)),console.log(this.historyList),this.cacheSearchList(i),console.log(this.urlPath),this.$router.push(this.urlPath))},closePopup(){},confirmPopup(){this.historyList=[],e("remove",`${this.funcName}History`)},cacheSearchList(i){const s=h.isString(i)?i:this.keyword;if(["headMail","entMail","instructions"].includes(this.funcName))return this.urlPath=`/districtMailbox/list/${this.funcName}?keyword=${s}&tabIndex=${this.tabIndex}`,e("set",`${this.funcName}History`,JSON.stringify(this.historyList));switch(this.funcName){case"zcxc":console.log("++++++++++"),this.urlPath=`/policy?isOriginalInfo=${this.isOriginal}&menu=${this.menu}&isHome=${this.isHome}&isMore=${this.isMore}&isPolcy=${this.isPolcy}&funcName=${this.funcName}&keyword=${s}&isWebview=${this.isWebview}`,e("set","zxcxHistory",JSON.stringify(this.historyList));return;case"xmsb":return this.urlPath=`/policy?isOriginalInfo=${this.isOriginal}&menu=${this.menu}&isHome=${this.isHome}&isMore=${this.isMore}&isPolcy=${this.isPolcy}&funcName=${this.funcName}&keyword=${s}&isWebview=${this.isWebview}`,e("set","xmsbHistory",JSON.stringify(this.historyList));case"msjx":return this.urlPath=`/policy?isOriginalInfo=${this.isOriginal}&menu=${this.menu}&isHome=${this.isHome}&isMore=${this.isMore}&isPolcy=${this.isPolcy}&funcName=${this.funcName}&keyword=${s}&isWebview=${this.isWebview}`,e("set","msjxHistory",JSON.stringify(this.historyList));case"fwzyk":return this.urlPath=`/policy?funcName=${this.funcName}&keyword=${s}&isWebview=${this.isWebview}&isHome=${this.isHome}&isMore=${this.isMore}`,e("set","fwzykHistory",JSON.stringify(this.historyList));case"wdsq":return this.urlPath=`/pages/my-appeal-concern/my-appeal-concern?keyword=${s}&isWebview=${this.isWebview}&tabIndex=${this.tabIndex}&isCenter=${this.isCenter}&isHome=${this.isHome}&isMore=${this.isMore}`,e("set","wdsqHistory",JSON.stringify(this.historyList));case"zwfwm":return this.urlPath=`/pages/government-affairs-service/government-affairs-service?keyword=${s}&isWebview=${this.isWebview}&funcName=${this.funcName}&isHome=${this.isHome}&isMore=${this.isMore}`,e("set","zwfwmHistory",JSON.stringify(this.historyList));case"zwfw":return this.urlPath=`/pages/function-init-list/function-init-list?keyword=${s}&isWebview=${this.isWebview}&funcName=${this.funcName}&isHome=${this.isHome}&isMore=${this.isMore}`,e("set","zwfmHistory",JSON.stringify(this.historyList));case"districtheadList":return this.urlPath=`/districthead?keyword=${s}&tabIndex=${this.tabIndex}`,e("set","districtheadListHistory",JSON.stringify(this.historyList));default:return}},clearHistory(){this.historyList.length!=0&&this.$dialog.confirm({message:"\u662F\u5426\u5220\u9664\u6240\u6709\u5386\u53F2\u8BB0\u5F55"}).then(()=>{this.confirmPopup()}).catch(()=>{})},removeCurrentHistory(i){this.historyList.splice(i,1),this.historyList.length>10&&(this.historyList=this.historyList.slice(0,10)),this.cacheSearchList()},getStorageHistory(){this.historyList=e("get",`${this.funcName}History`)?JSON.parse(e("get",`${this.funcName}History`)):[]},backToPolicyList(){this.leftEvent()},leftEvent(){if(this.cacheSearchList(""),this.funcName=="zwfwm"){p();return}this.$router.push(this.urlPath)}}},L=i=>(v("data-v-1beeeda2"),i=i(),P(),i),x={class:"func-search-list-page absolute"},H={key:0,class:"history-search"},k={class:"flex search-title"},S=L(()=>t("text",{class:"seach-history-box f-14 label-color"},"\u5386\u53F2\u641C\u7D22",-1)),I={class:"label-scroll-box"},O={class:"search-content box-sizing"},M=["onClick"];function W(i,s,C,z,r,o){const f=m("van-search"),u=m("van-icon");return c(),a("div",x,[t("div",null,[l(f,{modelValue:r.keyword,"onUpdate:modelValue":s[0]||(s[0]=n=>r.keyword=n),"show-action":"",ref:"searchInput",placeholder:r.funcName==="fwzyk"?"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0\u641C\u7D22":"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",class:"van-input",onCancel:o.backToPolicyList,onSearch:o.getPolicyForKeyWord},null,8,["modelValue","placeholder","onCancel","onSearch"]),r.historyList.length>0?(c(),a("div",H,[t("div",k,[S,l(u,{name:"delete-o",size:"17",color:"#9193AC",onClick:o.clearHistory},null,8,["onClick"])]),t("div",I,[t("div",O,[(c(!0),a(w,null,$(r.historyList,(n,y)=>(c(),a("div",{class:"search-history-list inline-flex ellipsis box-sizing",key:y},[t("text",{class:"search-text f-12 label-color ellipsis",onClick:d=>o.getPolicyForKeyWord(n)},N(n),9,M),l(u,{style:{"margin-left":"8px"},name:"close",onClick:d=>o.removeCurrentHistory(y),size:"15",color:"#9193AC"},null,8,["onClick"])]))),128))])])])):b("",!0)])])}var ai=g(_,[["render",W],["__scopeId","data-v-1beeeda2"]]);export{ai as default};
