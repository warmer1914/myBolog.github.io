var S=Object.defineProperty;var D=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var v=(a,t,s)=>t in a?S(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,r=(a,t)=>{for(var s in t||(t={}))$.call(t,s)&&v(a,s,t[s]);if(D)for(var s of D(t))M.call(t,s)&&v(a,s,t[s]);return a};import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{y as p,z as _,A as f,m as d,E as i,K as W,L as I}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{b as y}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{I as x}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";const U={name:"PolicyTypeChart",props:{xAxisList:{type:Array,default:[]},yAxisList:{type:Array,default:[]}},data(){return{isPlaceholderShow:!1,chartOptions:{}}},watch:{xAxisList:{handler(a){Array.isArray(a)&&(a==null?void 0:a.length)>0?(this.initChart(),this.isPlaceholderShow=!1):this.isPlaceholderShow=!0},deep:!0,immediate:!0}},mounted(){},computed:{},methods:{initChart(){const a={legend:{show:!1},grid:{top:20,bottom:0,left:0,right:10,containLabel:!0},xAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},data:this.xAxisList},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter(t){return t>0?Math.ceil(t):Math.floor(t)}},min:0,max:Math.max(...this.yAxisList),interval:Math.ceil(Math.max(...this.yAxisList))/4},series:[{name:"\u653F\u7B56\u7C7B\u578B",type:"bar",color:"#5b8ff9",barWidth:16,label:{show:!1},data:this.yAxisList}]};this.chartOptions=Object.assign({},a)}}},O={style:{height:"180px"}};function N(a,t,s,n,e,o){const l=p("base-chart");return _(),f("div",O,[d(l,{id:"policyTypeChart",isShow:e.isPlaceholderShow,options:e.chartOptions},null,8,["isShow","options"])])}var k=u(U,[["render",N]]);const B={name:"IssueUnitChart",props:{xAxisList:{type:Array,default:[]},yAxisList:{type:Array,default:[]}},data(){return{isPlaceholderShow:!1,chartOptions:{}}},watch:{xAxisList:{handler(a){Array.isArray(a)&&(a==null?void 0:a.length)>0?(this.initChart(),this.isPlaceholderShow=!1):this.isPlaceholderShow=!0},deep:!0,immediate:!0}},mounted(){},computed:{},methods:{initChart(){const a={legend:{show:!1},grid:{top:0,bottom:0,left:5,right:20,containLabel:!0},xAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter(t){return t>0?Math.ceil(t):Math.floor(t)}},min:0,max:Math.max(...this.xAxisList),interval:Math.ceil(Math.max(...this.xAxisList)/3)},yAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter(t,s){return typeof t=="string"&&t.length>4?`${t.substring(0,6)}...`:t}},inverse:!0,data:this.yAxisList},series:[{name:"\u53D1\u6587\u5355\u4F4D",type:"bar",color:"#5b8ff9",barWidth:8,label:{show:!1},data:this.xAxisList}]};this.chartOptions=Object.assign({},a)}}},z={style:{height:"180px"}};function E(a,t,s,n,e,o){const l=p("base-chart");return _(),f("div",z,[d(l,{id:"issueUnitChart",isShow:e.isPlaceholderShow,options:e.chartOptions},null,8,["isShow","options"])])}var F=u(B,[["render",E]]);const G={data(){return{statisticsData:{},policyTypeChartData:{xAxisList:[],yAxisList:[]},issueUnitChartData:{xAxisList:[],yAxisList:[]},wordCloudData:[]}},components:{PolicyTypeChart:k,IssueUnitChart:F},created(){this.getPolicyNumStatistics(),this.getPolicyTypeChartData({current:1,size:5}),this.getIssueUnitChartData({current:1,size:5}),this.getHotPolicyTagChartData({current:1,size:10})},methods:{transformPage(a){this.$store.dispatch("GET_PAGE_COMMAND",a)},getPolicyNumStatistics(){this.$api.getPolicyNumStatisticsApi().then(a=>{(a==null?void 0:a.code)===200&&(a==null?void 0:a.data)?this.statisticsData=r({},a==null?void 0:a.data):console.log(a==null?void 0:a.error)}).catch(a=>this.$toast(a==null?void 0:a.message))},getPolicyTypeChartData(a){this.$api.getPolicyTypeChartDataApi(r({},a)).then(t=>{if((t==null?void 0:t.code)===200&&(t==null?void 0:t.data)){const{records:s=[]}=t==null?void 0:t.data;if(Array.isArray(s)&&s.length>0){const n=s.map(o=>o==null?void 0:o.fieldName),e=s.map(o=>o==null?void 0:o.fieldValue);this.policyTypeChartData={xAxisList:n,yAxisList:e}}}else console.log(t==null?void 0:t.error)}).catch(t=>this.$toast(t==null?void 0:t.message))},getIssueUnitChartData(a){this.$api.getIssueUnitChartDataApi(r({},a)).then(t=>{if((t==null?void 0:t.code)===200&&(t==null?void 0:t.data)){const{records:s=[]}=t==null?void 0:t.data;if(Array.isArray(s)&&s.length>0){const n=s.map(o=>o==null?void 0:o.fieldValue),e=s.map(o=>o==null?void 0:o.fieldName);this.issueUnitChartData={xAxisList:n,yAxisList:e}}}else console.log(t==null?void 0:t.error)}).catch(t=>this.$toast(t==null?void 0:t.message))},getHotPolicyTagChartData(a){this.$api.getHotPolicyTagChartDataApi(r({},a)).then(t=>{if((t==null?void 0:t.code)===200&&(t==null?void 0:t.data)){const{records:s=[]}=t==null?void 0:t.data;if(Array.isArray(s)&&s.length>0){const n=s.reduce((l,c)=>l+parseFloat(c==null?void 0:c.policyCount),0),e=Math.floor(n/(s==null?void 0:s.length)),o=s.map(l=>({name:l==null?void 0:l.labelName,value:l==null?void 0:l.policyCount,textStyle:{color:(l==null?void 0:l.policyCount)>e?"#5B8FF9":"rgba(91, 143, 249, .39)"}}));this.wordCloudData=o}}else console.log(t==null?void 0:t.error)}).catch(t=>this.$toast(t==null?void 0:t.message))}}},h=a=>(W("data-v-fbff9c24"),a=a(),I(),a),H={class:"policyPushWrap"},j={class:"statisticsWrap"},K=h(()=>i("div",{class:"statisticsTopWrap"},[i("p",{class:"topTxtWrap"},[i("span",null,"\u653F\u7B56\u6570\u91CF\u7EDF\u8BA1"),i("span",null,"\u5355\u4F4D\uFF1A\u6761")])],-1)),q={class:"statisticsBottomWrap"},J=h(()=>i("li",null,"\u63A8\u9001\u653F\u7B56\u6B21\u6570",-1)),Q=h(()=>i("li",null,"\u5165\u5E93\u653F\u7B56\u603B\u6570",-1)),R=h(()=>i("li",null,"\u7533\u62A5\u5F81\u96C6\u653F\u7B56",-1)),X={class:"barChartWrap"},Y=h(()=>i("div",{class:"barChartTopWrap"},[i("span",null,"\u653F\u7B56\u7C7B\u578B TOP5")],-1)),Z={class:"barChartWrap"},V=h(()=>i("div",{class:"barChartTopWrap"},[i("span",null,"\u53D1\u6587\u5355\u4F4D TOP5")],-1)),tt={class:"barChartWrap"},at=h(()=>i("div",{class:"barChartTopWrap"},[i("span",null,"\u70ED\u95E8\u653F\u7B56\u6807\u7B7E")],-1)),st={style:{height:"150px"}};function it(a,t,s,n,e,o){var A,g,C,L,m,b,P;const l=p("PolicyTypeChart"),c=p("IssueUnitChart"),w=p("echarts-word-cloud");return _(),f("div",H,[i("div",j,[K,i("div",q,[i("ul",{onClick:t[0]||(t[0]=y(T=>o.transformPage("policyPush"),["stop"]))},[J,i("li",null,x(((A=e.statisticsData)==null?void 0:A.pushTotal)||"--"),1)]),i("ul",{onClick:t[1]||(t[1]=y(T=>o.transformPage("entryGit"),["stop"]))},[Q,i("li",null,x(((g=e.statisticsData)==null?void 0:g.policyTotal)||"--"),1)]),i("ul",{onClick:t[2]||(t[2]=y(T=>o.transformPage("applyPolicy"),["stop"]))},[R,i("li",null,x(((C=e.statisticsData)==null?void 0:C.declareTotal)||"--"),1)])])]),i("div",X,[Y,d(l,{xAxisList:(L=e.policyTypeChartData)==null?void 0:L.xAxisList,yAxisList:(m=e.policyTypeChartData)==null?void 0:m.yAxisList},null,8,["xAxisList","yAxisList"])]),i("div",Z,[V,d(c,{xAxisList:(b=e.issueUnitChartData)==null?void 0:b.xAxisList,yAxisList:(P=e.issueUnitChartData)==null?void 0:P.yAxisList},null,8,["xAxisList","yAxisList"])]),i("div",tt,[at,i("div",st,[d(w,{id:"wordCloudChart",title:"\u70ED\u95E8\u653F\u7B56\u6807\u7B7E",data:e.wordCloudData},null,8,["data"])])])])}var rt=u(G,[["render",it],["__scopeId","data-v-fbff9c24"]]);export{rt as default};
