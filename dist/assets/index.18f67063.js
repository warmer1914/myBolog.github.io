var k=Object.defineProperty;var b=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(t,a,s)=>a in t?k(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,x=(t,a)=>{for(var s in a||(a={}))$.call(a,s)&&v(t,s,a[s]);if(b)for(var s of b(a))I.call(a,s)&&v(t,s,a[s]);return t};import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import{y as S,z as L,A as D,m as T,E as i,K as N,L as w}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{b as O}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{I as u,q as g}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";const P={name:"AuthMonitorChart",props:{interval:{type:Number,default:0},maxItem:{type:Object,default:{}},xAxisList:{type:Array,default:[]},yAxisList:{type:Array,default:[]}},data(){return{isPlaceholderShow:!1,chartOptions:{}}},watch:{yAxisList:{handler(t){Array.isArray(t)&&(t==null?void 0:t.length)>0?(this.initChart(),this.isPlaceholderShow=!1):this.isPlaceholderShow=!0},deep:!0,immediate:!0}},data(){return{isPlaceholderShow:!1,chartOptions:{}}},mounted(){},computed:{},methods:{initChart(){const t=this.maxItem,a={legend:{show:!1},grid:{top:70,bottom:0,left:0,right:30,containLabel:!0},xAxis:{type:"category",data:this.xAxisList,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:this.interval}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter(s){return s>0?Math.ceil(s):Math.floor(s)}},min:0,max:Math.max(...this.yAxisList),interval:Math.ceil(Math.max(...this.yAxisList)/4)},series:[{name:"\u8BA4\u8BC1\u4F01\u4E1A\u76D1\u6D4B",data:this.yAxisList,type:"line",symbol:"circle",symbolSize:8,markPoint:{symbol:"path://M1233.329493,174.421333h-1112.064c-34.128213,0-61.781333 27.661653-61.781333,61.781334v473.658026c0,34.117973 27.65312,61.781333,61.781333,61.781334h472.80128l83.23072,144.155306,83.23072-144.155306h472.80128c34.128213,0,61.781333-27.66336,61.781334-61.781334V236.202667c0-34.117973-27.65312-61.781333-61.781334-61.781334z",symbolOffset:["0","-60%"],label:{position:"insideTop",distance:7,color:"#fff",formatter(s){return`${t==null?void 0:t.xAxis}
${s.value}\u5BB6`}},data:[{type:"max",name:"Max"}]},markLine:{symbol:["none","none"],itemStyle:{normal:{lineStyle:{type:"dashed"},label:{show:!1}}},data:[{xAxis:t==null?void 0:t.xAxis}]},itemStyle:{normal:{color:"#5b8ff9",borderColor:"#fff",lineStyle:{color:"#5b8ff9"}}},areaStyle:{normal:{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:"rgba(91, 143, 249, 0)"},{offset:1,color:"rgba(91, 143, 249, 0.2)"}],globalCoord:!1}}}}]};this.chartOptions=Object.assign({},this.chartOptions,a)}}},W={style:{height:"180px"}};function Y(t,a,s,l,o,n){const r=S("base-chart");return L(),D("div",W,[T(r,{id:"authMonitorChart",isShow:o.isPlaceholderShow,options:o.chartOptions},null,8,["isShow","options"])])}var E=M(P,[["render",Y]]);const j={data(){return{isActive:0,statisticsData:{},authMonitorChartData:{maxItem:{},xAxisList:[],yAxisList:[]}}},components:{AuthMonitorChart:E},created(){this.getCompanyAuthStatistics(),this.handleTabClick(0)},methods:{transformPage(t){this.$store.dispatch("GET_PAGE_COMMAND",t)},handleTabClick(t){this.isActive=t;const a=this.$dayjs().subtract(1,"day"),s=t===0?6:29,l={queryTimeStart:this.$dayjs(a).subtract(s,"day").format("YYYY-MM-DD"),queryTimeEnd:this.$dayjs(a).format("YYYY-MM-DD")};this.getAuthCompanyMonitor(l)},getCompanyAuthStatistics(){this.$api.getCompanyAuthStatisticsApi().then(t=>{(t==null?void 0:t.code)===200&&(t==null?void 0:t.data)?this.statisticsData=x({},t==null?void 0:t.data):console.log(t==null?void 0:t.error)}).catch(t=>this.$toast(t==null?void 0:t.message))},getAuthCompanyMonitor(t){this.$api.getAuthCompanyMonitorApi(x({},t)).then(a=>{var s;if((a==null?void 0:a.code)===200&&(a==null?void 0:a.data)){const l=a==null?void 0:a.data;if(Array.isArray(l)&&l.length>0){const o=l.map(e=>{const d=this.$dayjs(e==null?void 0:e.fieldName).get("month")+1,m=this.$dayjs(e==null?void 0:e.fieldName).get("date");return`${d}.${m}`}),n=l.map(e=>e==null?void 0:e.fieldValue),r=(s=Math.max(...n))==null?void 0:s.toString(),h=n==null?void 0:n.indexOf(r),p={xAxis:o[h],yAxis:r};this.authMonitorChartData={maxItem:p,xAxisList:o,yAxisList:n}}}else console.log(a==null?void 0:a.error)}).catch(a=>this.$toast(a==null?void 0:a.message))}}},c=t=>(N("data-v-2af5684c"),t=t(),w(),t),z={class:"companyAuthWrap"},B={class:"statisticsWrap"},q={class:"statisticsTopWrap"},G=c(()=>i("p",{class:"topTxtWrap"},[i("span",null,"\u8BA4\u8BC1\u4F01\u4E1A\u6570"),i("span",null,"\u5355\u4F4D\uFF1A\u5BB6")],-1)),K={class:"statisticsBottomWrap"},R=c(()=>i("li",null,"\u8FD17\u65E5\u8BA4\u8BC1",-1)),F=c(()=>i("li",null,"\u8FD130\u65E5\u8BA4\u8BC1",-1)),H=c(()=>i("li",null,"\u8BA4\u8BC1\u6210\u529F\u7387",-1)),J={class:"lineChartWrap"},Q={class:"lineChartTopWrap"},U=c(()=>i("span",null,"\u8BA4\u8BC1\u4F01\u4E1A\u76D1\u6D4B",-1)),V={class:"tabsWrap"};function X(t,a,s,l,o,n){var h,p,e,d,m,y,f,_,A;const r=S("AuthMonitorChart");return L(),D("div",z,[i("div",B,[i("div",q,[G,i("p",{class:"topNumWrap",onClick:a[0]||(a[0]=O(C=>n.transformPage("companyAuth"),["stop"]))},u(((h=o.statisticsData)==null?void 0:h.epTotalNum)||"--"),1)]),i("div",K,[i("ul",null,[R,i("li",null,u(((p=o.statisticsData)==null?void 0:p.epNearly7daysNum)||"--"),1)]),i("ul",null,[F,i("li",null,u(((e=o.statisticsData)==null?void 0:e.epNearly30daysNum)||"--"),1)]),i("ul",null,[H,i("li",null,u(((d=o.statisticsData)==null?void 0:d.epSuccRate)||"--"),1)])])]),i("div",J,[i("div",Q,[U,i("ul",V,[i("li",{class:g({activeTab:o.isActive===0}),onClick:a[1]||(a[1]=C=>n.handleTabClick(0))},"\u8FD17\u65E5",2),i("li",{class:g({activeTab:o.isActive===1}),onClick:a[2]||(a[2]=C=>n.handleTabClick(1))},"\u8FD130\u65E5",2)])]),T(r,{interval:((y=(m=o.authMonitorChartData)==null?void 0:m.xAxisList)==null?void 0:y.length)>7?6:0,maxItem:(f=o.authMonitorChartData)==null?void 0:f.maxItem,xAxisList:(_=o.authMonitorChartData)==null?void 0:_.xAxisList,yAxisList:(A=o.authMonitorChartData)==null?void 0:A.yAxisList},null,8,["interval","maxItem","xAxisList","yAxisList"])])])}var et=M(j,[["render",X],["__scopeId","data-v-2af5684c"]]);export{et as default};
