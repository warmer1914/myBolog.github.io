var C=Object.defineProperty,k=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var v=(e,o,r)=>o in e?C(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,l=(e,o)=>{for(var r in o||(o={}))R.call(o,r)&&v(e,r,o[r]);if(S)for(var r of S(o))K.call(o,r)&&v(e,r,o[r]);return e},p=(e,o)=>k(e,A(o));import{b as M}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{U as x}from"./index.67bdbe62.js";import{b as I,u as N}from"./_vue-router@4.0.14@vue-router.c27d2a8d.js";import{m as V,u as b}from"./_vuex@4.0.2@vuex.35900dea.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{r as g}from"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";import{y as W,z as m,A as u,m as y,E as _,F as E,J,D as P,g as q,K as w,L as F}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{I as T}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_vant@3.4.6@vant.e4fff504.js";import"./_@vant_use@1.3.6@@vant.1b0ef691.js";import"./_@vant_popperjs@1.1.0@@vant.ae31ad00.js";import"./_vue-mobile-calendar@3.3.0@vue-mobile-calendar.c9c3461a.js";import"./_axios@0.21.4@axios.56d8ec29.js";import"./_qs@6.10.3@qs.59603e06.js";import"./_side-channel@1.0.4@side-channel.0a841574.js";import"./_get-intrinsic@1.1.1@get-intrinsic.46bb42c1.js";import"./_has-symbols@1.0.3@has-symbols.7f361f9b.js";import"./_function-bind@1.1.1@function-bind.09a6b7a3.js";import"./_has@1.0.3@has.dc0c57e0.js";import"./_call-bind@1.0.2@call-bind.c10bfa07.js";import"./_object-inspect@1.12.0@object-inspect.b4aaeeae.js";import"./_lodash@4.17.21@lodash.2e4506b9.js";import"./_dayjs@1.11.0@dayjs.c3a0a36c.js";import"./_echarts@5.2.2@echarts.518f2fa5.js";import"./_tslib@2.3.0@tslib.54efd67f.js";import"./_zrender@5.2.1@zrender.d1d234d3.js";import"./_@vue_devtools-api@6.1.3@@vue.3188b863.js";const z={name:"searchPolicy",setup(){const e=q(),o=I(),r=b(),a=N().query,{noControl:n,replyModel:d}=r.getters,s=e.appContext.config.globalProperties.$handleLocalStorage,c=d?s("get","searchReplyKeyWords")||"[]":s("get","searchKeyWords")||"[]",i=g(JSON.parse(c));return{value:g(a.urlKeyword||""),onSearch:(h,L=!0)=>{if(!!x.trimAllSpace(h)){if(L&&(i.value.push(h),!d&&s("set","searchKeyWords",JSON.stringify(i.value)),d&&s("set","searchReplyKeyWords",JSON.stringify(i.value))),n)return r.commit("SET_PAGE_TRANSFORM_PARAM",p(l({},a),{keyWord:h})),o.go(-1);o.push({name:"appealList",query:p(l({},a),{keyWord:h})})}},searchWordList:i,onCancel:()=>{if(n)return r.commit("SET_PAGE_TRANSFORM_PARAM",p(l({},a),{keyWord:""})),o.go(-1);o.push({name:"appealList",query:p(l({},a),{keyWord:""})})}}},data(){return{}},computed:l({},V(["noControl","replyModel"])),mounted(){this.$refs.searchInput.focus()},methods:{setVaule(e){this.value=e,this.onSearch(e,!1)},deleteIcon(e){this.searchWordList.splice(e,1),!this.replyModel&&this.$handleLocalStorage("set","searchKeyWords",JSON.stringify(this.searchWordList)),this.replyModel&&this.$handleLocalStorage("set","searchReplyKeyWords",JSON.stringify(this.searchWordList))},deleteAll(){!this.replyModel&&this.$handleLocalStorage("remove","searchKeyWords"),this.replyModel&&this.$handleLocalStorage("remove","searchReplyKeyWords"),this.searchWordList=[]}}},B=e=>(w("data-v-bfb4a250"),e=e(),F(),e),G={class:"searchStyle"},U={key:0,class:"iconList"},$={class:"flex-ro justify-side"},D=B(()=>_("span",{class:"titles"},"\u641C\u7D22\u5386\u53F2",-1)),j={class:"keyList flex-ro"},H=["onClick"],Q={class:"ellipsis"};function X(e,o,r,t,a,n){const d=W("van-search"),s=W("van-icon");return m(),u("div",G,[y(d,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=c=>t.value=c),"show-action":"",ref:"searchInput",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",onCancel:t.onCancel,onSearch:t.onSearch},null,8,["modelValue","onCancel","onSearch"]),t.searchWordList.length>0?(m(),u("div",U,[_("div",$,[D,y(s,{name:"delete-o",size:"20",onClick:n.deleteAll},null,8,["onClick"])]),_("div",j,[(m(!0),u(E,null,J(t.searchWordList,(c,i)=>(m(),u("div",{class:"flex flex-ro search-record",onClick:f=>n.setVaule(c)},[_("span",Q,T(c),1),y(s,{name:"close",onClick:M(f=>n.deleteIcon(i),["stop"]),size:"15"},null,8,["onClick"])],8,H))),256))])])):P("",!0)])}var Me=O(z,[["render",X],["__scopeId","data-v-bfb4a250"]]);export{Me as default};
