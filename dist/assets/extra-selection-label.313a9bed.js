import{h as _,U as d}from"./index.67bdbe62.js";import{a as C,v as m}from"./_@vue_runtime-dom@3.2.31@@vue.240af360.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import{y as x,z as a,A as r,E as s,m as p,r as b,F as L,J as g,K as N,L as B,D as k}from"./_@vue_runtime-core@3.2.31@@vue.b0aa5f29.js";import{I as f,q as v}from"./_@vue_shared@3.2.31@@vue.7f2d3904.js";import"./_vant@3.4.6@vant.e4fff504.js";import"./_@vant_use@1.3.6@@vant.1b0ef691.js";import"./_@vue_reactivity@3.2.31@@vue.435b5d06.js";import"./_@vant_popperjs@1.1.0@@vant.ae31ad00.js";import"./_vue-mobile-calendar@3.3.0@vue-mobile-calendar.c9c3461a.js";import"./_axios@0.21.4@axios.56d8ec29.js";import"./_vuex@4.0.2@vuex.35900dea.js";import"./_@vue_devtools-api@6.1.3@@vue.3188b863.js";import"./_vue-router@4.0.14@vue-router.c27d2a8d.js";import"./_qs@6.10.3@qs.59603e06.js";import"./_side-channel@1.0.4@side-channel.0a841574.js";import"./_get-intrinsic@1.1.1@get-intrinsic.46bb42c1.js";import"./_has-symbols@1.0.3@has-symbols.7f361f9b.js";import"./_function-bind@1.1.1@function-bind.09a6b7a3.js";import"./_has@1.0.3@has.dc0c57e0.js";import"./_call-bind@1.0.2@call-bind.c10bfa07.js";import"./_object-inspect@1.12.0@object-inspect.b4aaeeae.js";import"./_lodash@4.17.21@lodash.2e4506b9.js";import"./_dayjs@1.11.0@dayjs.c3a0a36c.js";import"./_echarts@5.2.2@echarts.518f2fa5.js";import"./_tslib@2.3.0@tslib.54efd67f.js";import"./_zrender@5.2.1@zrender.d1d234d3.js";const I=new URL("./assets/apeal_clear_res.e99a0075.png",self.location).href,S={data(){return{noClick:!0,clearRes:I,activeCode:19e3,choiceLabel:[],labelFunc:"",defaultHeight:0,currentPage:1,total:0,pageSize:10,showDeep:!1,loadingOriginalPolicy:!1,industryList:[],keyword:"",navStyle:{navTitle:"\u9009\u62E9\u6807\u7B7E",leftIcon:"arrowthinleft"},isHome:0,isWebview:0,menu:0,isPolcy:0,isMore:0,isOriginal:0,funcName:"",choiceLabelBase:[],entId:_("get","chooseCompanyId")||""}},created(){const{query:e}=this.$route;this.getParams(e)},watch:{keyword(e){this.searchIndustry()}},methods:{removeAllCurrentType(e){this.$api.noLimitClearNoticeLabel({entId:this.entId,typeCode:e},{"Content-Type":"application/x-www-form-urlencoded"}).then(i=>{i.code==200&&(this.choiceLabel=[])})},getParams(e){console.log(e),this.labelFunc=e.labelFunc||"",this.isWebview=e.isWebview?Number(e.isWebview):0,this.isOriginal=e.isOriginal?Number(e.isOriginal):0,this.isHome=e.isHome?Number(e.isHome):0,this.isMore=e.isMore?Number(e.isMore):0,this.isPolcy=e.isPolcy?Number(e.isPolcy):0,this.menu=e.menu?Number(e.menu):0,this.funcName=e.funcName,this.choiceLabel=this.labelFunc=="gmjj"&&e.choiceLabel?JSON.parse(e.choiceLabel):this.labelFunc=="dfzd"&&e.choiceLabelBase?JSON.parse(e.choiceLabelBase):[],this.choiceLabelBase=this.labelFunc=="gmjj"&&e.choiceLabelBase?JSON.parse(e.choiceLabelBase):this.labelFunc=="dfzd"&&e.choiceLabel?JSON.parse(e.choiceLabel):[],this.initIndustryList()},highLightKeyword(e){if(!e)return"";if(d.trimAllSpace(this.keyword)=="")return e;let i=RegExp(d.trimAllSpace(this.keyword),"g"),t=this,n=e.replace(i,function(){return"<text class='f-16 co-blue'>"+d.trimAllSpace(t.keyword)+"</text>"});return i=t=null,n},removeCurrent(e,i){if(this.funcName=="jzts")return this.attentionOrCancelSetting(e,i);this.choiceLabel.length>0&&this.choiceLabel.splice(e,1)},attentionOrCancelSetting(e,i){if(!i.id){this.choiceLabel.length>0&&this.choiceLabel.splice(e,1);return}this.$api.cancelLabel({sid:i.id},{"Content-Type":"application/x-www-form-urlencoded"}).then(t=>{t.code==200&&t.data?(this.choiceLabel.length>0&&this.choiceLabel.splice(e,1),uni.showToast({icon:"none",title:"\u53D6\u6D88\u6210\u529F"})):uni.showToast({icon:"warning",title:"\u53D6\u6D88\u5931\u8D25"})})},choiceCurrentLabel(e){this.choiceLabel.length<3&&!this.isHaveChioce(e)&&this.choiceLabel.push(e)},isHaveChioce(e){let i=!1;return this.choiceLabel.length>0?this.choiceLabel.some(t=>(t.labelCode&&e.labelCode&&t.labelCode==e.labelCode&&(i=!0),t.typeCode&&e.typeCode&&t.typeCode==e.typeCode&&(i=!0),i)):i},resetAllChoice(e){this.activeCode=e;let i=!1;console.log(this.choiceLabel),this.choiceLabel.length>0&&this.funcName=="jzts"&&(i=this.choiceLabel.some(t=>{if(console.log(t),t.id)return this.removeAllCurrentType(this.labelFunc=="gmjj"?"B001002":"B001007"),!0})),i||(this.choiceLabel=[])},submitAllChoice(e){if(this.activeCode=e,this.funcName=="jzts"){this.labelFunc=="gmjj";let t=[];this.choiceLabel.forEach(n=>{n.id||t.push({typeCode:this.labelFunc=="gmjj"?"B001002":"B001007",labelCode:n.labelCode,entId:this.entId})}),t.length>0&&this.$api.attentionBatchLabel(t).then(n=>{if(n.code==200&&n.data){n.data.forEach((c,h)=>{this.choiceLabel[h].id=c});let o=`/policyLabel?funcName=${this.funcName}&labelFunc=${this.labelFunc}&isOriginal=${this.isOriginal}&isPolcyBase=${this.isPolcy}&isMoreBase=${this.isMore}&isHomeBase=${this.isHome}&isWebview=${this.isWebview}&menu=${this.menu}&choiceLabel=${JSON.stringify(this.choiceLabel)}&choiceLabelBase=${JSON.stringify(this.choiceLabelBase)}`;this.$router.push(o);return}})}let i=`/policyLabel?funcName=${this.funcName}&labelFunc=${this.labelFunc}&isOriginal=${this.isOriginal}&isHomeBase=${this.isHome}&isPolcyBase=${this.isPolcy}&isMoreBase=${this.isMore}&isWebview=${this.isWebview}&menu=${this.menu}&choiceLabel=${JSON.stringify(this.choiceLabel)}&choiceLabelBase=${JSON.stringify(this.choiceLabelBase)}`;this.$router.push(i)},showEveryLabel(e){if(!e)return"";if(d.isArray(e)){let i="";return e.forEach(t=>{i+=t+"/"}),i.length>0?i.slice(0,i.length-1):i}},searchIndustry(){this.initIndustryList()},initIndustryList(){!this.labelFunc||this.$api[this.labelFunc=="gmjj"?"getTraditionalEconomyLabel":"getLocalIndustryLabel"]({labelName:this.keyword}).then(e=>{console.log(e),e.code==200&&(this.industryList=e.data&&e.data.length>0?e.data:[])})}}},O=e=>(N("data-v-0f3827e0"),e=e(),B(),e),F={class:"extra-selection-label-container relative"},j={class:"flex search-header fixed box-sizing"},z={class:"inline-flex search-box flex"},A={class:"label-container"},H=["onClick"],$=["innerHTML"],P={key:0,class:"belong-info f-12 word-break-custom"},T={class:"ad-model flex flex-center"},M=["src"],E=O(()=>s("div",{class:"ad-text flex flex-center"},[s("text",{class:"f-14"},"\u6682\u65E0\u641C\u7D22\u7ED3\u679C")],-1)),J={class:"choice-res-panel absolute box-sizing"},W={class:"choice-res-show"},D={class:"choice-res-item ellipsis"},R={class:"f-12 ellipsis",style:{"padding-right":"8px"}},U={class:"propmt-info-choice f-14"},K={class:"flex panel-bottom"},q={class:"f-12 choice-data"},V={class:"flex operation-panel"};function G(e,i,t,n,o,c){const h=x("van-icon");return a(),r("div",F,[s("div",j,[s("div",z,[p(h,{name:"search",color:"#BBB",size:"16"}),b(s("input",{type:"text",class:"input-content",onInput:i[0]||(i[0]=l=>o.keyword=o.keyword.replace(/[, ]/g,"")),onkeypress:"javascript:if(event.keyCode == 32)event.returnValue = false;",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9","placeholder-class":"ellipsis","placeholder-style":"color: #9193AC;font-size:14px","onUpdate:modelValue":i[1]||(i[1]=l=>o.keyword=l),onConfirm:i[2]||(i[2]=(...l)=>c.searchIndustry&&c.searchIndustry(...l))},null,544),[[C,o.keyword]])]),s("text",{class:"inline-block cancle-btn",onClick:i[3]||(i[3]=(...l)=>c.searchIndustry&&c.searchIndustry(...l))},"\u641C\u7D22")]),s("div",A,[(a(!0),r(L,null,g(o.industryList,(l,u)=>(a(),r("div",{class:"label-item-info flex",key:u,onClick:y=>c.choiceCurrentLabel(l)},[s("div",{class:"main-title f-14 label-color word-break-custom",innerHTML:c.highLightKeyword(l.labelName)},null,8,$),c.showEveryLabel(l.shortLabelNameList)?(a(),r("div",P,f(c.showEveryLabel(l.shortLabelNameList)),1)):k("",!0)],8,H))),128)),b(s("div",T,[s("image",{src:o.clearRes,mode:"",class:"ad-img"},null,8,M),E],512),[[m,o.industryList.length==0]])]),s("div",J,[s("div",W,[(a(!0),r(L,null,g(o.choiceLabel,(l,u)=>(a(),r("div",null,[s("div",D,[s("div",R,f(l.labelName),1),p(h,{class:"remove-label",name:"close",onClick:y=>c.removeCurrent(u,l),size:"16",color:"#9193AC"},null,8,["onClick"])])]))),256)),b(s("div",U,"\u5F53\u524D\u6682\u65E0\u9009\u4E2D\u6807\u7B7E\u2026",512),[[m,o.choiceLabel.length==0]])]),s("div",K,[s("div",q," \u5DF2\u9009 ("+f(o.choiceLabel.length)+"/3) ",1),s("div",V,[s("div",{class:v(["basic-btn f-12 box-sizing",[o.activeCode==20001?"active-btn":"default-btn"]]),onClick:i[4]||(i[4]=l=>c.resetAllChoice(20001))},"\u91CD\u7F6E ",2),s("div",{class:v(["basic-btn f-12 box-sizing",[o.activeCode==20002?"active-btn":"default-btn"]]),onClick:i[5]||(i[5]=l=>c.submitAllChoice(20002))},"\u786E\u5B9A ",2)])])])])}var we=w(S,[["render",G],["__scopeId","data-v-0f3827e0"]]);export{we as default};
